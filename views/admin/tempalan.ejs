

<!-- aaaaalllllaaaaaaaan  -->


 <!-- <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Nest Dashboard</title>
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta property="og:title" content="" />
        <meta property="og:type" content="" />
        <meta property="og:url" content="" />
        <meta property="og:image" content="" />
        <!-- Favicon -->
        <link rel="shortcut icon" type="image/x-icon" href="/adminAssets/dashboardAssets/imgs/theme/favicon.svg" />
        <!-- Template CSS -->
        <link href="/adminAssets/dashboardAssets/css/main.css?v=1.1" rel="stylesheet" type="text/css" />
    </head>

    <body>
        <div class="screen-overlay"></div>
        <aside class="navbar-aside" id="offcanvas_aside">
            <div class="aside-top">
                <a href="index.html" class="brand-wrap">
                    <img src="/adminAssets/dashboardAssets/imgs/theme/logo.svg" class="logo" alt="Nest Dashboard" />
                </a>
                <div>
                    <button class="btn btn-icon btn-aside-minimize"><i class="text-muted material-icons md-menu_open"></i></button>
                </div>
            </div>
            <nav>
                <ul class="menu-aside">
                    <li class="menu-item active">
                        <a class="menu-link" href="#">
                            <i class="icon material-icons md-home"></i>
                            <span class="text">Dashboard</span>
                        </a>
                    </li>
                    <li class="menu-item ">
                        <a class="menu-link" href="/admin/AllProducts">
                            <i class="icon material-icons md-shopping_bag"></i>
                            <span class="text">Products</span>
                        </a>
                       
                        <li class="menu-item">
                            <a class="menu-link" href="/admin/adCategory">
                                <i class="icon material-icons md-category"></i>
                                <span class="text">Categories</span>
                            </a>
                        </li>
                    </li>
                    <li class="menu-item ">
                        <a class="menu-link" href="/admin/orders">
                            <i class="icon material-icons md-shopping_cart"></i>
                            <span class="text">Orders</span>
                        </a>
                       
                    </li>
                    <li class="menu-item ">
                        <a class="menu-link" href="/admin/coupons">
                            <i class="icon material-icons md-monetization_on"></i>
                            <span class="text">Coupons</span>
                        </a>
                        </li>
                        <li class="menu-item ">
                            <a class="menu-link" href="/admin/categoryoffer">
                                <i class="icon material-icons md-local_offer"></i>
                                <span class="text">offers</span>
                                
                            </a>
                           
                            </li>
                            <li class="menu-item ">
                                <a class="menu-link" href="/admin/adminUsers">
                                    <i class="icon material-icons md-person"></i>
                                    <span class="text">Users</span>
                                </a>
                                </li>
                    
                    
                        
                    </li>
                   
                   
                    <!-- <li class="menu-item">
                        <a class="menu-link" href="#"> <i class="icon material-icons md-stars"></i> <span class="text">Brands</span> </a>
                    </li> -->
                    <li class="menu-item">
                        <a class="menu-link" disabled href="#">
                            <i class="icon material-icons md-pie_chart"></i>
                            <span class="text">Sales Report</span>
                        </a>
                    </li>
                </ul>
                <hr />
              
                <br />
                <br />
            </nav>
        </aside>
        <main class="main-wrap">
            <header class="main-header navbar">
                <div class="col-search">
                    <form class="searchform">
                        <div class="input-group">
                            <input list="search_terms" type="text" class="form-control" placeholder="Search term" />
                            <button class="btn btn-light bg" type="button"><i class="material-icons md-search"></i></button>
                        </div>
                        <datalist id="search_terms">
                            <option value="Products"></option>
                            <option value="New orders"></option>
                            <option value="Apple iphone"></option>
                            <option value="Ahmed Hassan"></option>
                        </datalist>
                    </form>
                </div>
                <div class="col-nav">
                    <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"><i class="material-icons md-apps"></i></button>
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link btn-icon" href="#">
                                <i class="material-icons md-notifications animation-shake"></i>
                                <span class="badge rounded-pill">3</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn-icon darkmode" href="#"> <i class="material-icons md-nights_stay"></i> </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="requestfullscreen nav-link btn-icon"><i class="material-icons md-cast"></i></a>
                        </li>
                        <li class="dropdown nav-item">
                            <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownLanguage" aria-expanded="false"><i class="material-icons md-public"></i></a>
                            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownLanguage">
                                <a class="dropdown-item text-brand" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-us.png" alt="English" />English</a>
                                <a class="dropdown-item" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-fr.png" alt="Français" />Français</a>
                                <a class="dropdown-item" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-jp.png" alt="Français" />日本語</a>
                                <a class="dropdown-item" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-cn.png" alt="Français" />中国人</a>
                            </div>
                        </li>
                        <li class="dropdown nav-item">
                            <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount" aria-expanded="false"> <img class="img-xs rounded-circle" src="/adminAssets/dashboardAssets/imgs/people/avatar-2.png" alt="User" /></a>
                            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                                <a class="dropdown-item" href="#"><i class="material-icons md-perm_identity"></i>Edit Profile</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-settings"></i>Account Settings</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-account_balance_wallet"></i>Wallet</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-receipt"></i>Billing</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-help_outline"></i>Help center</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item text-danger" href="#"><i class="material-icons md-exit_to_app"></i>Logout</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </header>
            <section class="content-main">
                <div class="content-header">
                    <div>
                        <h2 class="content-title card-title">Dashboard</h2>
                        <p>Whole data about your business here</p>
                    </div>
                    <div>
                        <a href="#" class="btn btn-primary"><i class="text-muted material-icons md-post_add"></i>Create report</a>
                    </div>
                </div>


            <!-- details..................  -->
 <!-- Sale & Revenue Start -->

                 <!-- <div class="row">
                     <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-primary-light"><i class="text-primary material-icons md-monetization_on"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Revenue</h6>
                                    <span>$13,456.5</span>
                                    <span class="text-sm"> Shipping fees are not included </span>
                                </div>
                            </article>
                        </div>
                    </div> 
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-success-light"><i class="text-success material-icons md-local_shipping"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Orders</h6>
                                    <span>53.668</span>
                                    <span class="text-sm"> Excluding orders in transit </span>
                                </div>
                            </article>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                           <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-warning-light"><i class="text-warning material-icons md-qr_code"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Products</h6>
                                    <span>9.856</span>
                                    <span class="text-sm"> In 19 Categories </span>
                                </div>
                            </article> 
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                             <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Monthly Earning</h6>
                                    <span>$6,982</span>
                                    <span class="text-sm"> Based in your local time. </span>
                                </div>
                            </article> 
                        </div>
                    </div>
                </div> -->

                <div class="row">
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-primary-light"><i class="text-primary material-icons md-monetization_on"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title"> RazorPay and Wallet Revenue</h6>
                                    <span>₹</span>
                                    
                                </div>
                            </article>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-success-light"><i class="text-success material-icons md-COD"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Cash On Delivery Revenue</h6>
                                    <span>₹</span>
                                   
                                </div>
                            </article>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-warning-light"><i class="text-warning material-icons md-qr_code"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Total Revenue</h6>
                                    <span>₹</span>
                                    
                                </div>
                            </article>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">All Orders</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Pending Orders</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">All Products</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Total Users</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">All categories</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    
                </div>




            <!-- kp code  -->
                <!-- <div class="container-fluid pt-4 px-4">
                    <div class="row g-4">
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-line fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Razorpay and Wallet Revenue</p>
                                    <h6 class="mb-0">₹</h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-line fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Cash On Delivery Revenue</p>
                                    <h6 class="mb-0">₹ </h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-bar fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Total Revenue</p>
                                    <h6 class="mb-0">₹</h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-bar fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">All Orders</p>
                                    <h6 class="mb-0"></h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-area fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Pending Orders</p>
                                    <h6 class="mb-0"></h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-pie fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">All Products</p>
                                    <h6 class="mb-0"></h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-pie fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Total User</p>
                                    <h6 class="mb-0"></h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xl-3">
                            <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                                <i class="fa fa-chart-pie fa-3x text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">All category</p>
                                    <h6 class="mb-0"></h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->









               <!-- charttttttttt  -->
               <!-- <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-secondary text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Monthly Sales</h6>
                                <a href="">Show All</a>
                            </div>
                            <canvas id="worldwide-sales"></canvas>
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-secondary text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">

                                <h6 class="mb-0">Yearly Sales</h6>
                                <a href="">Show All</a>
                            </div>
                            <canvas id="salse-revenue"></canvas>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h4 class="card-title mb-0">Interval</h4>
                            <select class="form-control" id="intervalSelect" style="min-width: 400px; margin-left: 1rem;" onchange="revenueInterval()">
                              <option value="weekly">This Week</option>
                              <option value="monthly" >Monthly</option>
                              <option value="yearly" >Yearly</option>
                          </select>
                          
                          
                        </div>
                        <canvas id="chrt2" width="400" height="400"></canvas>
                        <div id="traffic-chart-legend" class="rounded-legend legend-vertical legend-bottom-left pt-4"></div>
                    </div>
                </div>
            </div>
        </div> -->

        <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Weekday Revenue</h4>
                        <canvas id="chrt" width="400" height="400"></canvas>
                        <div id="traffic-chart-legend" class="rounded-legend legend-vertical legend-bottom-left pt-4"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h4 class="card-title mb-0">Interval</h4>
                            <select class="form-control" id="intervalSelect" style="min-width: 400px; margin-left: 1rem;" onchange="revenueInterval()">
                              <option value="weekly">This Week</option>
                              <option value="monthly" >Monthly</option>
                              <option value="yearly" >Yearly</option>
                          </select>
                          
                          
                        </div>
                        <canvas id="chrt2" width="400" height="400"></canvas>
                        <div id="traffic-chart-legend" class="rounded-legend legend-vertical legend-bottom-left pt-4"></div>
                    </div>
                </div>
            </div>
        </div>
  

            </section>
            <!-- content-main end// -->
            <footer class="main-footer font-xs">
                <div class="row pb-30 pt-15">
                    <div class="col-sm-6">
                        <script>
                            document.write(new Date().getFullYear());
                        </script>
                        &copy; Nest - HTML Ecommerce Template .
                    </div>
                    <div class="col-sm-6">
                        <div class="text-sm-end">All rights reserved</div>
                    </div>
                </div>
            </footer>
        </main>
        <script src="/adminAssets/dashboardAssets/js/vendors/jquery-3.6.0.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/bootstrap.bundle.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/select2.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/perfect-scrollbar.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/jquery.fullscreen.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/chart.js"></script>
        <!-- Main Script -->
        <script src="/adminAssets/dashboardAssets/js/main.js?v=1.1" type="text/javascript"></script>
        <script src="/adminAssets/dashboardAssets/js/custom-chart.js" type="text/javascript"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        

        <!-- <script>
            var ctx = document.getElementById('mySimpleChart').getContext('2d');
            var mySimpleChart;
        
            // Sample datasets for day, week, and month
            var dayData = [10, 20, 15, 30, 25];
            var weekData = [100, 150, 170, 120, 200, 180, 220];
            var monthData = [500, 600, 550, 700, 750, 800, 900, 850, 900, 950, 1000, 1050];
        
            function updateChart(data, labels) {
                console.log('checkeeeeeeeeeee',labels);
                
                if (mySimpleChart) {
                    mySimpleChart.destroy(); // Destroy previous chart instance before creating a new one
                }
        
                mySimpleChart = new Chart(ctx, {
                    type: 'line', // You can use 'bar', 'pie', etc. if you prefer
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Sales',
                            data: data,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4 // Curved line for a smoother look
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false 
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    display: false // Removes grid lines for simplicity
                                }
                            },
                            x: {
                                grid: {
                                    display: false // Removes grid lines for simplicity
                                }
                            }
                        }
                    }
                });
            }
        
            // Initial load with day data
            updateChart(dayData, ['12 AM', '6 AM', '12 PM', '6 PM', '11 PM']);
        
            // Event listener for time range selection
            document.getElementById('timeRange').addEventListener('change', function () {
                var timeRange = this.value;
        
                if (timeRange === 'day') {

                    console.log('kerindooooooooooooooooooooo  day',dayData);
                    
                    updateChart(dayData, ['12 AM', '6 AM', '12 PM', '6 PM', '11 PM']);
                } else if (timeRange === 'week') {
                    updateChart(weekData, ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']);
                } else if (timeRange === 'month') {
                    updateChart(monthData, ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8', 'Week 9', 'Week 10', 'Week 11', 'Week 12']);
                }
            });
        </script> -->

        <!-- <script>
            let ctx = document.getElementById('mySimpleChart').getContext('2d');
            let mySimpleChart;
    console.log("FGGgggggctx",ctx)
            async function fetchSalesData(range) {
                console.log("enter in to fetchSalesData")
                try {
                    const response = await fetch(`/admin/sales-data?range=${range}`);
                    const result = await response.json();
                    console.log("result",result)
                    if (result.success) {
                        updateChart(result.data, result.labels);
                    } else {
                        console.error("Failed to fetch data:", result.error);
                    }
                } catch (error) {
                    console.error("Error fetching sales data:", error);
                }
            }
    
            function updateChart(data, labels) {
                if (mySimpleChart) {
                    mySimpleChart.destroy();  // Destroy previous chart instance
                }
    
                mySimpleChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Sales',
                            data: data,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: { beginAtZero: true, grid: { display: false } },
                            x: { grid: { display: false } }
                        }
                    }
                });
            }
    
            // Load initial daily data
            fetchSalesData('daily');
    
            // Update chart data when time range changes
            document.getElementById('timeRange').addEventListener('change', function () {
                fetchSalesData(this.value);
            });
        </script> -->
    
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                let ctx = document.getElementById('chrt').getContext('2d');
                let ctx2 = document.getElementById('chrt2').getContext('2d');
              
                let labels = <%- JSON.stringify(labels) %>;
                let values = <%- JSON.stringify(values) %>;
    
                let labels2 = <%- JSON.stringify(labels2) %>;
                let values2 = <%- JSON.stringify(values2) %>;
              
          
                const backgroundColors1 = [
                    'rgba(255, 186, 0, 0.5)', 
                    'rgba(255, 108, 0, 0.5)', 
                    'rgba(75, 192, 192, 0.5)', 
                    'rgba(153, 102, 255, 0.5)',
                    'rgba(255, 159, 64, 0.5)',
                    'rgba(255, 206, 86, 0.5)',
                    'rgba(231, 233, 237, 0.5)'
                ];
              
                const borderColors1 = [
                    'rgba(255, 186, 0, 1)',
                    'rgba(255, 108, 0, 1)', 
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(231, 233, 237, 1)'
                ];
              
                const backgroundColors2 = [
                    'rgba(255, 108, 0, 0.5)', 
                    'rgba(255, 186, 0, 0.5)',  
                    'rgba(231, 233, 237, 0.5)',
                    'rgba(54, 162, 235, 0.5)',
                    'rgba(255, 99, 132, 0.5)',
                    'rgba(75, 192, 192, 0.5)',
                    'rgba(153, 102, 255, 0.5)'
                ];
              
                const borderColors2 = [
                    'rgba(255, 108, 0, 1)',  
                    'rgba(255, 186, 0, 1)',  
                    'rgba(231, 233, 237, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 99, 132, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)'
                ];
              
                const repeatedBackgroundColors1 = Array.from({ length: labels.length }, (_, i) => backgroundColors1[i % backgroundColors1.length]);
                const repeatedBorderColors1 = Array.from({ length: labels.length }, (_, i) => borderColors1[i % borderColors1.length]);
              
                const repeatedBackgroundColors2 = Array.from({ length: labels2.length }, (_, i) => backgroundColors2[i % backgroundColors2.length]);
                const repeatedBorderColors2 = Array.from({ length: labels2.length }, (_, i) => borderColors2[i % borderColors2.length]);
              
                let chart1 = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Revenue per Weekday',
                            data: values,
                            backgroundColor: repeatedBackgroundColors1,
                            borderColor: repeatedBorderColors1,
                            borderWidth: 2,
                            hoverBackgroundColor: repeatedBackgroundColors1.map(color => color.replace('0.5', '0.75')),
                            hoverBorderColor: repeatedBorderColors1,
                            fill: false,
                        }]
                    },
                    options: {
                        responsive: false,
                        maintainAspectRatio: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function (value) { return value + ' Rs'; }
                                }
                            }
                        }
                    }
                });
              
                let chart2 = new Chart(ctx2, {
                    type: 'bar',
                    data: {
                        labels: labels2,
                        datasets: [{
                            label: 'Revenue per Interval',
                            data: values2,
                            backgroundColor: repeatedBackgroundColors2,
                            borderColor: repeatedBorderColors2,
                            borderWidth: 2,
                            hoverBackgroundColor: repeatedBackgroundColors2.map(color => color.replace('0.5', '0.75')),
                            hoverBorderColor: repeatedBorderColors2,
                            fill: false,
                        }]
                    },
                    options: {
                        responsive: false,
                        maintainAspectRatio: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function (value) { return value + ' Rs'; }
                                }
                            }
                        }
                    }
                });
            });
          
            function revenueInterval() {
                const interval = document.getElementById("intervalSelect").value;
                window.location.href = "/admin/dashboard?interval=" + interval;
            }
          </script>
          
    </body>
</html>  -->




<!-- shibhily dashboard ejs  -->


<%- include('../layouts/admin/header.ejs') -%>

<style>
    .chart {
        padding: 60px 0px;
    }

    .statuses h4 {
        padding-top: 5px;
    }
</style>

    
                    <div class="main-content">
                        <!-- main-content-wrap -->
                        <div class="main-content-inner">
                            <!-- main-content-wrap -->
                            <div class="main-content-wrap">
                                <div class="content-header d-flex shadow justify-content-between">
                                    <header class=" d-flex  justify-content-between">
                                        <h2 class="content-title card-title">Dashboard</h2>
                                    </header>
                                    <!-- Filter by Date Range -->
                                    <div class="row my-4">
                                        <form action="/admin" method="GET" class="d-flex align-items-center">
                                            <!-- Custom Date Range -->
                                            <div id="custom-date" class=" align-items-center mt-2 d-none">
                                                <label for="startDate" class="me-2">From:</label>
                                                <input type="date" name="startDate" id="startDate" value="<%=startDate ? new Date(startDate).toLocaleDateString('en-CA') :'' %>" class="form-control me-3 rounded-0 border">
                                                <label for="endDate" class="me-2">To:</label>
                                                <input type="date" name="endDate" id="endDate" value="<%=endDate ? new Date(endDate).toLocaleDateString('en-CA') : '' %>" class="form-control me-3 rounded-0 border">
                                            </div>
                                            <select name="filterType" class="form-select me-3 rounded-0 border" style="width: 200px; height: 45px;">
                                                <option value="daily" <%= filterType === 'daily' ? 'selected' : '' %> >Daily</option>
                                                <option value="weekly" <%= filterType === 'weekly' ? 'selected' : '' %>>Weekly</option>
                                                <option value="yearly" <%= filterType === 'yearly' ? 'selected' : '' %>>Yearly</option>
                                                <option value="custom" <%= filterType === 'custom' ? 'selected' : '' %>>Custom Date</option>
                                            </select>
                                            <button type="submit" class="btn btn-success text-light rounded-0 border me-4">Filter</button>
                                        </form>
                                    </div>
                                </div>
                        
                                <!-- Charts Section -->
                                <div class="charts-container">
                                    <div class="chart col-lg-12 d-flex">
                                        <div class="col-lg-7">
                                            <canvas id="lineChart"></canvas>
                                        </div>
                                        <div class="col-lg-5 py-5 ps-5 ">
                                            <h3 class="mx-5 my-3 text-decoration-underline">Total Sales : <%= filterType %>
                                            </h3>
                                            <h4>Total orders : <%= salesCount %>
                                            </h4>
                                            <h4>Total Revenue : ₹ <%= totalAmount.toFixed(2) %>
                                            </h4>
                                            <h4></h4>
                                        </div>
                                    </div>
                                    <div class="d-flex">
                                        <div class="chart col-lg-6 d-block">
                                            <div class="col-lg-12 pb-5 ps-5 align-content-center ms-5">
                                                <div class="col-8 my-5">
                                                    <canvas id="doughnut"></canvas>
                                                </div>
                                                <h3 class="mx-5 my-3 text-decoration-underline">Profit & Sales : <%= filterType %>
                                                </h3>
                                                <h4>Total orders : <%= salesCount %>
                                                </h4>
                                                <h4>Total Revenue : ₹ <%= totalAmount.toFixed(2) %>
                                                </h4>
                                                <h4>Total Discount : ₹ <%= totalDiscount.toFixed(2) %>
                                                </h4>
                                                <h4></h4>
                                            </div>
                                        </div>
                                        <div class="chart col-lg-6 d-block">
                                            <div class="col-lg-12 pb-5 ps-5 align-content-center ms-5">
                                                <div class="col-8 my-5">
                                                    <canvas id="polarArea"></canvas>
                                                </div>
                                                <h3 class="mx-5 my-3 text-decoration-underline">Order Statuses : <%= filterType %>
                                                </h3>
                                                <h4 class="ps-5 statuses">Total orders : <%= salesCount %>
                                                </h4>
                                                <div class="ps-5 statuses">
                                                    <h5>Total Processing : <%= orderStatusMap.Processing %>
                                                    </h5>
                                                    <h5>Total Shipped : <%= orderStatusMap.Shipped %>
                                                    </h5>
                                                    <h5>Total Delivered : <%= orderStatusMap.Delivered %>
                                                    </h5>
                                                    <h5>Total Cancelled : <%= orderStatusMap.Cancelled %>
                                                    </h5>
                                                    <h5>Total ReturnRequest : <%= orderStatusMap["Return Request"] %>
                                                    </h5>
                                                    <h5>Total Returned : <%= orderStatusMap.Returned %>
                                                    </h5>
                                                </div>
                        
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                        
                                <!-- best selling  -->
                                <h2 class="text-center mb-4  text-decoration-underline">Best-Selling ( <%= filterType %> )</h2>
                                <div class="container mt-5 d-flex">
                                    <div class="col-lg-4 px-2">
                                        <h3 class="text-center my-3">Best-Selling Products</h3>
                                        <ul class="list-group">
                                            <% topProducts.forEach(product=> { %>
                                                <li class="list-group-item d-flex justify-content-center gap-5 align-items-center h6">
                                                    <div class="col-lg-6">
                                                    <%= product.productName %>
                                                    </div>
                                                    <div class="badge bg-primary rounded-pill col-lg-3 ">
                                                        <%= product.totalSold %> sold
                                                    </div>
                                                </li>
                                                <% }) %>
                                        </ul>
                                    </div>
                                    <div class="col-lg-4 px-2">
                                        <h3 class="text-center my-3">Best-Selling Categories</h3>
                                        <ul class="list-group">
                                            <% topCategories.forEach(category=> { %>
                                                <li class="list-group-item d-flex justify-content-center gap-5 align-items-center h6">
                                                    <div class="col-lg-6">
                                                    <%= category.categoryName %>
                                                    </div>
                                                    <div class="badge bg-success rounded-pill col-lg-3">
                                                        <%= category.totalSold %> sold
                                                    </div>
                                                </li>
                                                <% }) %>
                                        </ul>
                                    </div>
                                
                                </div>
                                <hr>
                        
                                
                                <hr>
                        
                        
                            </section>
                            </div>
                            <!-- /main-content-wrap -->
                        </div>
                        <!-- /main-content-wrap -->
                        <!-- bottom-page -->

                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            document.addEventListener('DOMContentLoaded', () => {
                                const filterType = document.querySelector('[name="filterType"]');
                                const customDateSection = document.getElementById('custom-date');
                    
                                const toggleCustomDate = () => {
                                    if (filterType.value === 'custom') {
                                        customDateSection.classList.remove('d-none');
                                        customDateSection.classList.add('d-flex');
                    
                                    } else {
                                        customDateSection.classList.remove('d-flex');
                                        customDateSection.classList.add('d-none');
                                    }
                                };
                                filterType.addEventListener('change', toggleCustomDate);
                                toggleCustomDate();
                            });
                        </script>
                       <script>
                        const totalAmount = '<%= totalAmount %>';
                        const totalDiscount = '<%= totalDiscount %>';
                        
                        // Now that salesReport is defined, you can use it safely
                        const salesReport = <%- JSON.stringify(salesReport) %>;
                        const orderLabels = salesReport.map(order => new Date(order.createdOn).toLocaleDateString());
                        const orderAmounts = salesReport.map(order => order.finalAmount);
                        const discountAmounts = salesReport.map(order => order.discount);
                    
                        const doughnut = new Chart(document.getElementById('doughnut'), {
                            type: 'pie',
                            data: {
                                labels: ['Total Sales', 'Total Discount'], 
                                datasets: [{
                                    data: [totalAmount, totalDiscount],
                                    backgroundColor: ['#36a2eb', '#ff6384']
                                }]
                            }
                        });
                    
                        const orderStatusMap = {
                            Processing: '<%= orderStatusMap.Processing %>',
                            Shipped: '<%= orderStatusMap.Shipped %>',
                            Delivered: '<%= orderStatusMap.Delivered %>',
                            Cancelled: '<%= orderStatusMap.Cancelled %>',
                            ReturnRequest: '<%= orderStatusMap["Return Request"] %>',
                            Returned: '<%= orderStatusMap.Returned %>'
                        };
                        const polarArea = new Chart(document.getElementById('polarArea'), {
                            type: 'polarArea',
                            data: {
                                labels: ['Processing', 'Shipped', 'Delivered', 'Cancelled', 'Return Request', 'Returned'],
                                datasets: [{
                                    data: [
                                        orderStatusMap.Processing,
                                        orderStatusMap.Shipped,
                                        orderStatusMap.Delivered,
                                        orderStatusMap.Cancelled,
                                        orderStatusMap.ReturnRequest,
                                        orderStatusMap.Returned
                                    ],
                                    backgroundColor: [
                                        '#36a2eb', // Processing
                                        '#ff6384', // Shipped
                                        '#4bc0c0', // Delivered
                                        '#ffcd56', // Cancelled
                                        '#9966ff', // Return Request
                                        '#ff9f40'  // Returned
                                    ]
                                }]
                            }
                        });
                    
                        // Line Chart: Shows total sales over the selected period
                        const lineChart = new Chart(document.getElementById('lineChart'), {
                            type: 'line',
                            data: {
                                labels: orderLabels,
                                datasets: [{
                                    label: 'Total Sales',
                                    data: orderAmounts,
                                    borderColor: '#ffcd56',
                                    fill: false,
                                    tension: .3
                                }]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    x: {
                                        beginAtZero: true
                                    },
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                    </script>
                    
                    


<%- include('../layouts/admin/footer.ejs') -%>




<!-- coupon - checkout page script  -->

<script>
    document.getElementById('placeOrder').addEventListener('click', function(e) {
    e.preventDefault();

    const paymentMethod = document.getElementById("payment").value;
    const selectedRadio = document.querySelector('input[name="selectedAddress"]:checked');
    const total = document.getElementById("grandTotal").value;
    const walletElement = document.getElementById("walletbalance");
    const walletBalance = walletElement.getAttribute("data-balance");

    const totalAmt = Number(total);
    console.log("totalAMT:", typeof(totalAmt));
    console.log('paymentMethod:', paymentMethod);

    if (!selectedRadio) {
        Swal.fire({
            icon: 'warning',
            title: 'Please select an address',
            text: 'You must select an address before proceeding.',
        });
        return;
    }

    const selectedValue = JSON.parse(selectedRadio.value);
    const couponDiscount = parseFloat(document.getElementById("couponDiscount").value) || 0;  // Retrieve from hidden field or set default
    const couponPercentage = parseFloat(document.getElementById("couponPercentage").value) || 0; // Retrieve from hidden field or set default

    if (paymentMethod === 'Razorpay') {
        initiateRazorPayPayment(totalAmt, paymentMethod, selectedValue);
        return;
    }

    if (paymentMethod === 'wallet') {
        saveWalletOrder(totalAmt, paymentMethod, selectedValue, walletBalance);
        return;
    }

    fetch('/placeorder', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            paymentMethod: paymentMethod,
            selectedValue: selectedValue,
            couponDiscount: couponDiscount,
            couponPercentage: couponPercentage
        }),
    })
    .then(response => response.json())
    .then(data => {
        console.log('Backend response:', data);

        if (data.success) {
            window.location.href = '/ordersuccess';
        } else if (data.message) {
            Swal.fire({
                title: 'Order Processing Failed',
                text: data.message,
                icon: 'error',
                confirmButtonText: 'OK'
            });
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
});

</script>



<!-- shibhily sales report ejs  -->

<%- include('../layouts/admin/header.ejs') %>
    <!-- main-content -->
    <div class="main-content">
        <!-- main-content-wrap -->
        <div class="main-content-inner">
            <!-- main-content-wrap -->
            <div class="main-content-wrap">
                <div class="flex items-center flex-wrap justify-between gap20 mb-27">
                    <h3>Sales Report</h3>
                    <ul class="breadcrumbs flex items-center flex-wrap justify-start gap10">
                        <li>
                            <a href="/admin/dashboard">
                                <div class="text-tiny">Dashboard</div>
                            </a>
                        </li>
                        <li>
                            <i class="icon-chevron-right"></i>
                        </li>
                        <li>
                            <a href="#">
                                <div class="text-tiny">Reports</div>
                            </a>
                        </li>
                        <li>
                            <i class="icon-chevron-right"></i>
                        </li>
                        <li>
                            <div class="text-tiny">Sales Report</div>
                        </li>
                    </ul>
                </div>

                <!-- Overall Sales Summary -->
                <div class="wg-box flex justify-between">
                    <div>
                        <h3>Overall Sales Summary</h3>
                        <p>Total Orders: <%= totalSales %>
                        </p>
                        <p>Total Sales Amount: ₹<%= totalAmount %>
                        </p>
                        <p>Total Discount Applied: ₹<%= totalDiscount %>
                        </p>
                    </div>
                    <div class="flex gap10 ">
                        <a class="tf-button style-1"
                            href="/admin/download-pdf?startDate=<%= startDate %>&endDate=<%= endDate %>&reportType=<%= reportType %>">Download
                            PDF</a>
                        <a class="tf-button style-1"
                            href="/admin/download-excel?startDate=<%= startDate %>&endDate=<%= endDate %>&reportType=<%= reportType %>">Download
                            Excel</a>
                    </div>
                </div>


                <!-- Sales report filter options -->
                <div class="wg-box">
                    <div class="flex items-center justify-between gap10 flex-wrap">
                        <div class="wg-filter flex-grow">
                            <form class="form-search" method="GET"
                                action="/admin/salesReport?startDate=<%= startDate %>&endDate=<%= endDate %>&reportType=<%= reportType %> ">
                                <fieldset class="name">
                                   
                                    <label for="dateRange">Select Report Type</label>
                                    <div class="select">
                                        <select name="reportType" id="reportTypeSelect" onchange="toggleDateInputs()">
                                            <option value="">Select Report Type</option>
                                            <option value="daily" <%=reportType==='daily' ? 'selected' : '' %>>1 Day
                                            </option>
                                            <option value="weekly" <%=reportType==='weekly' ? 'selected' : '' %>>1 Week
                                            </option>
                                            <option value="monthly" <%=reportType==='monthly' ? 'selected' : '' %>>1
                                                Month</option>
                                            <option value="yearly" <%=reportType==='yearly' ? 'selected' : '' %>>1 Year
                                            </option>
                                            <option value="custom" <%=reportType==='custom' ? 'selected' : '' %>>Custom
                                                Date</option>
                                        </select>
                                    </div>
                                </fieldset>
                                <!-- Custom Date Inputs -->
                                <div id="customDateInputs" style="display: none;">
                                    <fieldset class="name">
                                        <label for="dateRange">Custom Date Range</label>
                                        <input type="date" name="startDate" value="<%= startDate %>">
                                        <input type="date" name="endDate" value="<%= endDate %>">
                                    </fieldset>
                                </div>
                                <div class="button-submit">
                                    <button class="tf-button style-1" type="submit">Filter</button>
                                </div>
                            </form>
                        </div>


                    </div>
                </div>

                <div class="wg-table table-sales-report">
                    <table>
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Date</th>
                                <th>Total Amount</th>
                                <th>Offer Discount</th>
                                <th>Coupon Discount</th>
                                <th>Payment Method</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (orders && orders.length> 0) { %>
                                <% orders.forEach(order=> { %>
                                    <tr>
                                        <td>
                                            <%= order.orderId %>
                                        </td>
                                        <td>
                                            <%= new Date(order.createdAt).toLocaleDateString() %>
                                        </td>
                                        <td>₹<%= order.total.toFixed(2) %>
                                        </td>
                                        <td>₹<%= order.cartItems[0].offerAmount ?
                                                order.cartItems[0].offerAmount.toFixed(2) : 0 %>
                                        </td>
                                        <td>₹<%= order.couponDiscount ? order.couponDiscount.toFixed(2) : 0 %>
                                        </td>
                                        <td>
                                            <%= order.paymentMethod %>
                                        </td>
                                        <!-- <td><%= order.coupon ? order.coupon.couponCode : 'No Coupon' %></td> -->
                                    </tr>
                                    <% }) %>
                                        <% } else { %>
                                            <tr>
                                                <td colspan="5" class="no-data">No sales data available for the selected
                                                    range.</td>
                                            </tr>
                                            <% } %>
                        </tbody>
                    </table>
                </div>


                <div class="divider"></div>
                <div class="flex items-center justify-between flex-wrap gap10">
                    <div class="text-tiny">Showing  <%= limit %> entries</div>
                    <ul class="wg-pagination">
                        <% if(currentPage >1) { %>  
                            <li>
                                <a href="?page=<%= currentPage - 1 %>&limit=<%= limit %>&startDate=<%= startDate %>&endDate=<%= endDate %>&reportType=<%= reportType %>">
                                    <i class="icon-chevron-left"></i>
                                </a>
                            </li>
                        <% } %>
                        
                        <% for (let i = 1; i <= totalPages; i++) { %>
                            <li class="<%= currentPage === i ? 'active' : '' %>">
                                <a href="?page=<%= i %>&limit=<%= limit %>&startDate=<%= startDate %>&endDate=<%= endDate %>&reportType=<%= reportType %>">
                                    <%= i %>
                                </a>
                            </li>
                        <% } %>
                
                        <% if (currentPage < totalPages) { %>
                            <li>
                                <a href="?page=<%= currentPage + 1 %>&limit=<%= limit %>&startDate=<%= startDate %>&endDate=<%= endDate %>&reportType=<%= reportType %>">
                                    <i class="icon-chevron-right"></i>
                                </a>
                            </li>
                        <% } %>
                    </ul>
                </div>
              
            </div>
            <!-- /main-content-wrap -->
        </div>
        <!-- /main-content-inner -->
    </div>
    <!-- /main-content -->
    <%- include('../layouts/admin/footer.ejs') %>
        <script>
            function toggleDateInputs() {
                const reportTypeSelect = document.getElementById('reportTypeSelect');
                const customDateInputs = document.getElementById('customDateInputs');

                // Show or hide custom date inputs based on the selected report type
                if (reportTypeSelect.value === 'custom') {
                    customDateInputs.style.display = 'block'; // Show date inputs
                } else {
                    customDateInputs.style.display = 'none'; // Hide date inputs
                }
            }
        </script>



<!-- my dashboard ////////////////////// -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Nest Dashboard</title>
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta property="og:title" content="" />
        <meta property="og:type" content="" />
        <meta property="og:url" content="" />
        <meta property="og:image" content="" />
        <!-- Favicon -->
        <link rel="shortcut icon" type="image/x-icon" href="/adminAssets/dashboardAssets/imgs/theme/favicon.svg" />
        <!-- Template CSS -->
        <link href="/adminAssets/dashboardAssets/css/main.css?v=1.1" rel="stylesheet" type="text/css" />
        <style>
            .chart {
                padding: 60px 0px;
            }
        
            .statuses h4 {
                padding-top: 5px;
            }
        </style>
    </head>

    <body>
        <div class="screen-overlay"></div>
        <aside class="navbar-aside" id="offcanvas_aside">
            <div class="aside-top">
                <a href="index.html" class="brand-wrap">
                    <img src="/adminAssets/dashboardAssets/imgs/theme/logo.svg" class="logo" alt="Nest Dashboard" />
                </a>
                <div>
                    <button class="btn btn-icon btn-aside-minimize"><i class="text-muted material-icons md-menu_open"></i></button>
                </div>
            </div>
            <nav>
                <ul class="menu-aside">
                    <li class="menu-item active">
                        <a class="menu-link" href="#">
                            <i class="icon material-icons md-home"></i>
                            <span class="text">Dashboard</span>
                        </a>
                    </li>
                    <li class="menu-item ">
                        <a class="menu-link" href="/admin/AllProducts">
                            <i class="icon material-icons md-shopping_bag"></i>
                            <span class="text">Products</span>
                        </a>
                       
                        <li class="menu-item">
                            <a class="menu-link" href="/admin/adCategory">
                                <i class="icon material-icons md-category"></i>
                                <span class="text">Categories</span>
                            </a>
                        </li>
                    </li>
                    <li class="menu-item ">
                        <a class="menu-link" href="/admin/orders">
                            <i class="icon material-icons md-shopping_cart"></i>
                            <span class="text">Orders</span>
                        </a>
                       
                    </li>
                    <li class="menu-item ">
                        <a class="menu-link" href="/admin/coupons">
                            <i class="icon material-icons md-monetization_on"></i>
                            <span class="text">Coupons</span>
                        </a>
                        </li>
                        <li class="menu-item ">
                            <a class="menu-link" href="/admin/categoryoffer">
                                <i class="icon material-icons md-local_offer"></i>
                                <span class="text">offers</span>
                                
                            </a>
                           
                            </li>
                            <li class="menu-item ">
                                <a class="menu-link" href="/admin/adminUsers">
                                    <i class="icon material-icons md-person"></i>
                                    <span class="text">Users</span>
                                </a>
                                </li>
                    
                    
                        
                    </li>
                   
                   
                    <!-- <li class="menu-item">
                        <a class="menu-link" href="#"> <i class="icon material-icons md-stars"></i> <span class="text">Brands</span> </a>
                    </li> -->
                    <li class="menu-item">
                        <a class="menu-link" disabled href="#">
                            <i class="icon material-icons md-pie_chart"></i>
                            <span class="text">Sales Report</span>
                        </a>
                    </li>
                </ul>
                <hr />
              
                <br />
                <br />
            </nav>
        </aside>
        <main class="main-wrap">
            <header class="main-header navbar">
                <div class="col-search">
                    <form class="searchform">
                        <div class="input-group">
                            <input list="search_terms" type="text" class="form-control" placeholder="Search term" />
                            <button class="btn btn-light bg" type="button"><i class="material-icons md-search"></i></button>
                        </div>
                        <datalist id="search_terms">
                            <option value="Products"></option>
                            <option value="New orders"></option>
                            <option value="Apple iphone"></option>
                            <option value="Ahmed Hassan"></option>
                        </datalist>
                    </form>
                </div>
                <div class="col-nav">
                    <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"><i class="material-icons md-apps"></i></button>
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link btn-icon" href="#">
                                <i class="material-icons md-notifications animation-shake"></i>
                                <span class="badge rounded-pill">3</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn-icon darkmode" href="#"> <i class="material-icons md-nights_stay"></i> </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="requestfullscreen nav-link btn-icon"><i class="material-icons md-cast"></i></a>
                        </li>
                        <li class="dropdown nav-item">
                            <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownLanguage" aria-expanded="false"><i class="material-icons md-public"></i></a>
                            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownLanguage">
                                <a class="dropdown-item text-brand" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-us.png" alt="English" />English</a>
                                <a class="dropdown-item" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-fr.png" alt="Français" />Français</a>
                                <a class="dropdown-item" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-jp.png" alt="Français" />日本語</a>
                                <a class="dropdown-item" href="#"><img src="/adminAssets/dashboardAssets/imgs/theme/flag-cn.png" alt="Français" />中国人</a>
                            </div>
                        </li>
                        <li class="dropdown nav-item">
                            <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount" aria-expanded="false"> <img class="img-xs rounded-circle" src="/adminAssets/dashboardAssets/imgs/people/avatar-2.png" alt="User" /></a>
                            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                                <a class="dropdown-item" href="#"><i class="material-icons md-perm_identity"></i>Edit Profile</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-settings"></i>Account Settings</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-account_balance_wallet"></i>Wallet</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-receipt"></i>Billing</a>
                                <a class="dropdown-item" href="#"><i class="material-icons md-help_outline"></i>Help center</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item text-danger" href="#"><i class="material-icons md-exit_to_app"></i>Logout</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </header>
            <section class="content-main">
                <div class="content-header">
                    <div>
                        <header class=" d-flex  justify-content-between">
                            <h2 class="content-title card-title">Dashboard</h2>
                        </header>
                        <!-- Filter by date range  -->
                        <div class="row my-4">
                            <form action="/admin/dashboard" method="GET" class="d-flex align-items-center">
                                <!-- Custom Date Range -->
                                <div id="custom-date" class=" align-items-center mt-2 d-none">
                                    <label for="startDate" class="me-2">From:</label>
                                    <input type="date" name="startDate" id="startDate" value="<%=startDate ? new Date(startDate).toLocaleDateString('en-CA') :'' %>" class="form-control me-3 rounded-0 border" >
                                    <label for="endDate" class="me-2">To:</label>
                                    <input type="date" name="endDate" id="endDate" value="<%=endDate ? new Date(endDate).toLocaleDateString('en-CA') : '' %>" class="form-control me-3 rounded-0 border" >
                                </div>   
                                <select name="filterType" class="form-select me-3 rounded-0 border" style="width: 200px; height: 45px;">
                                    <option value="daily" <%= filterType === 'daily' ? 'selected' : '' %> >Daily</option>
                                    <option value="weekly" <%= filterType === 'weekly' ? 'selected' : '' %> >Weekly</option>
                                    <option value="yearly" <%= filterType === 'yearly' ? 'selected' : '' %>>Yearly</option>
                                    <option value="custom" <%= filterType === 'custom' ? 'selected' : '' %> >Custom Date</option>
                                </select>
                                <button type="submit" class="btn btn-success text-light rounded-0 border me-4">Filter</button>
                                <div class="mt-4">
                                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#reportModal" onclick="setReportType('pdf')">Sales Report(PDF)</button>
                                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#reportModal" onclick="setReportType('excel')">Sales Report(EXCEL)</button>
                                    </div>
                            </form>
                        </div>
                    </div>
                    <!-- <div>
                        <a href="#" class="btn btn-primary"><i class="text-muted material-icons md-post_add"></i>Create report</a>
                    </div> -->
                </div>


            <!-- details..................  -->
 <!-- Sale & Revenue Start -->

               
                <!-- <div class="row">
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-primary-light"><i class="text-primary material-icons md-monetization_on"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title"> RazorPay and Wallet Revenue</h6>
                                    <span>₹</span>
                                    
                                </div>
                            </article>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-success-light"><i class="text-success material-icons md-COD"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Cash On Delivery Revenue</h6>
                                    <span>₹</span>
                                   
                                </div>
                            </article>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-warning-light"><i class="text-warning material-icons md-qr_code"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Total Revenue</h6>
                                    <span>₹</span>
                                    
                                </div>
                            </article>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">All Orders</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Pending Orders</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">All Products</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">Total Users</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="card card-body mb-4">
                            <article class="icontext">
                                <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                                <div class="text">
                                    <h6 class="mb-1 card-title">All categories</h6>
                                    <span></span>                            
                                </div>
                            </article>
                        </div>
                    </div>

                    
                </div> -->




          

               <!-- charttttttttt  -->
               <div class="chart col-lg-12 d-flex">
                <div class="col-lg-7">
                    <canvas id="lineChart"></canvas>
                </div>
                <div class="col-lg-5 py-5 ps-5">
                    <h3 class="mx-5 my-3 text-decoration-underline">Total Sales: <%= filterType %></h3>
                    <h4>Total orders: <%= salesCount %></h4>
                    <h4>Total Revenue: ₹ <%= totalAmount.toFixed(2) %></h4>
                </div>
            </div>
                
                <div class="d-flex">
                    <!-- <div class="chart col-lg-6 d-block">
                        <div class="col-lg-12 pb-5 ps-5 align-content-center ms-5">
                            <div class="col-8 my-5">
                                <canvas id="doughnut"></canvas>
                            </div>
                            <h3 class="mx-5 my-3 text-decoration-underline">Profit & Sales : <%= filterType %>
                            </h3>
                            <h4>Total orders : <%= salesCount %>
                            </h4>
                            <h4>Total Revenue : ₹ <%= totalAmount.toFixed(2) %>
                            </h4>
                            <h4>Total Discount : ₹ <%= totalDiscount.toFixed(2) %>
                            </h4>
                            <h4></h4>
                        </div>
                    </div> -->
                    <div class="chart col-lg-6 d-block">
                        <div class="col-lg-12 pb-5 ps-5 align-content-center ms-5">
                            <div class="col-8 my-5">
                                <canvas id="polarArea"></canvas>
                            </div>
                            <h3 class="mx-5 my-3 text-decoration-underline">Order Statuses : <%= filterType %>
                            </h3>
                            <!-- <h4 class="ps-5 statuses">Total orders : <%= salesCount %> -->
                            </h4>
                            <div class="ps-5 statuses">
                                <h5>Total Pending : <%= orderStatusMap.Pending %>
                                </h5>
                                <h5>Total Shipped : <%= orderStatusMap.Shipped %>
                                </h5>
                                <h5>Total Delivered : <%= orderStatusMap.Delivered %>
                                </h5>
                                <h5>Total Cancelled :<%= orderStatusMap.Cancelled %> 
                                </h5>
                                <h5>Total ReturnRequest : <%= orderStatusMap["Return Request"] %>
                                </h5>
                                <h5>Total Returned : <%= orderStatusMap.Returned %>
                                </h5>
                            </div>
    
                        </div>
                    </div>
                </div>
            </div>
            <hr>

  <!-- best selling  -->

            <h2 class="text-center mb-4  text-decoration-underline">Best-Selling ( <%= filterType %> )</h2>
            <div class="container mt-5 d-flex">
                <div class="col-lg-4 px-2">
                    <h3 class="text-center my-3">Best-Selling Products</h3>
                    <ul class="list-group">
                        <% topProducts.forEach(product=> { %>
                            <li class="list-group-item d-flex justify-content-center gap-5 align-items-center h6">
                                <div class="col-lg-6">
                                <%= product.productName %>
                                </div>
                                <div class="badge bg-primary rounded-pill col-lg-3 ">
                                    <%= product.totalSold %> sold
                                </div>
                            </li>
                            <% }) %>
                    </ul>
                </div>
                <div class="col-lg-4 px-2">
                    <h3 class="text-center my-3">Best-Selling Categories</h3>
                    <ul class="list-group">
                        <% topCategories.forEach(category=> { %>
                            <li class="list-group-item d-flex justify-content-center gap-5 align-items-center h6">
                                <div class="col-lg-6">
                                <%= category.categoryName %>
                                </div>
                                <div class="badge bg-success rounded-pill col-lg-3">
                                    <%= category.totalSold %> sold
                                </div>
                            </li>
                            <% }) %>
                    </ul>
                </div>
            
            </div>
            <hr>
    
            
            <hr>



            </section>
            <!-- content-main end// -->
            <footer class="main-footer font-xs">
                <div class="row pb-30 pt-15">
                    <div class="col-sm-6">
                        <script>
                            document.write(new Date().getFullYear());
                        </script>
                        &copy; Nest - HTML Ecommerce Template .
                    </div>
                    <div class="col-sm-6">
                        <div class="text-sm-end">All rights reserved</div>
                    </div>
                </div>
            </footer>
        </main>
        <script src="/adminAssets/dashboardAssets/js/vendors/jquery-3.6.0.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/bootstrap.bundle.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/select2.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/perfect-scrollbar.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/jquery.fullscreen.min.js"></script>
        <script src="/adminAssets/dashboardAssets/js/vendors/chart.js"></script>
        <!-- Main Script -->
        <script src="/adminAssets/dashboardAssets/js/main.js?v=1.1" type="text/javascript"></script>
        <script src="/adminAssets/dashboardAssets/js/custom-chart.js" type="text/javascript"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        

        <!-- <script>
            var ctx = document.getElementById('mySimpleChart').getContext('2d');
            var mySimpleChart;
        
            // Sample datasets for day, week, and month
            var dayData = [10, 20, 15, 30, 25];
            var weekData = [100, 150, 170, 120, 200, 180, 220];
            var monthData = [500, 600, 550, 700, 750, 800, 900, 850, 900, 950, 1000, 1050];
        
            function updateChart(data, labels) {
                console.log('checkeeeeeeeeeee',labels);
                
                if (mySimpleChart) {
                    mySimpleChart.destroy(); // Destroy previous chart instance before creating a new one
                }
        
                mySimpleChart = new Chart(ctx, {
                    type: 'line', // You can use 'bar', 'pie', etc. if you prefer
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Sales',
                            data: data,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4 // Curved line for a smoother look
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false 
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    display: false // Removes grid lines for simplicity
                                }
                            },
                            x: {
                                grid: {
                                    display: false // Removes grid lines for simplicity
                                }
                            }
                        }
                    }
                });
            }
        
            // Initial load with day data
            updateChart(dayData, ['12 AM', '6 AM', '12 PM', '6 PM', '11 PM']);
        
            // Event listener for time range selection
            document.getElementById('timeRange').addEventListener('change', function () {
                var timeRange = this.value;
        
                if (timeRange === 'day') {

                    console.log('kerindooooooooooooooooooooo  day',dayData);
                    
                    updateChart(dayData, ['12 AM', '6 AM', '12 PM', '6 PM', '11 PM']);
                } else if (timeRange === 'week') {
                    updateChart(weekData, ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']);
                } else if (timeRange === 'month') {
                    updateChart(monthData, ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8', 'Week 9', 'Week 10', 'Week 11', 'Week 12']);
                }
            });
        </script> -->

        
       
<!-- sh  -->

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const filterType = document.querySelector('[name="filterType"]');
        const customDateSection = document.getElementById('custom-date');

        const toggleCustomDate = () => {
            if (filterType.value === 'custom') {
                customDateSection.classList.remove('d-none');
                customDateSection.classList.add('d-flex');

            } else {
                customDateSection.classList.remove('d-flex');
                customDateSection.classList.add('d-none');
            }
        };
        filterType.addEventListener('change', toggleCustomDate);
        toggleCustomDate();
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Data for the Line Chart
        const orderDates = `<%= JSON.stringify(overallOrderAmount.map(entry => entry.date)) %>`;
        const orderAmounts = `<%= JSON.stringify(overallOrderAmount.map(entry => entry.amount)) %>`;

        const lineChartCtx = document.getElementById("lineChart").getContext("2d");
        new Chart(lineChartCtx, {
            type: "line",
            data: {
                labels: orderDates,
                datasets: [{
                    label: "Total Orders Amount",
                    data: orderAmounts,
                    borderColor: "rgba(75, 192, 192, 1)",
                    backgroundColor: "rgba(75, 192, 192, 0.2)",
                    fill: true,
                    tension: 0.4,
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: { title: { display: true, text: "Date" } },
                    y: { title: { display: true, text: "Amount" } }
                }
            }
        });

        // Data for the Polar Area Chart
        const orderStatusLabels = ["Pending", "Shipped", "Delivered", "Cancelled", "Return Request", "Returned"];
        const orderStatusCounts = [
           ` <%= orderStatusMap.Pending || 0 %>, 
            <%= orderStatusMap.Shipped || 0 %>, 
            <%= orderStatusMap.Delivered || 0 %>, 
            <%= orderStatusMap.Cancelled || 0 %>, 
            <%= orderStatusMap["Return Request"] || 0 %>, 
            <%= orderStatusMap.Returned || 0 %>`
        ];

        const polarAreaCtx = document.getElementById("polarArea").getContext("2d");
        new Chart(polarAreaCtx, {
            type: "polarArea",
            data: {
                labels: orderStatusLabels,
                datasets: [{
                    data: orderStatusCounts,
                    backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#FF9F40", "#B768D8", "#4BC0C0"]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: "right" }
                }
            }
        });

        // Optional: Data for Doughnut Chart (Total Discount if needed)
        const discountDates = `<%= JSON.stringify(overallDiscount.map(entry => entry.date)) %>;`
        const discountAmounts = `<%= JSON.stringify(overallDiscount.map(entry => entry.amount)) %>`;

        const doughnutCtx = document.getElementById("doughnut")?.getContext("2d");
        if (doughnutCtx) {
            new Chart(doughnutCtx, {
                type: "doughnut",
                data: {
                    labels: discountDates,
                    datasets: [{
                        label: "Total Discounts",
                        data: discountAmounts,
                        backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#FF9F40", "#B768D8", "#4BC0C0"]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: "bottom" }
                    }
                }
            });
        }
    });
</script>
    </body>
</html>
